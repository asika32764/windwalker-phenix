"use strict";var _get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.options=e.extend(!0,{},this.constructor.defaultOptions,n),this._listeners={}}return _createClass(t,null,[{key:"defaultOptions",get:function(){return{}}}]),_createClass(t,[{key:"use",value:function(e){var t=this;if(Array.isArray(e))return e.forEach(function(e){return t.use(e)}),this;if(!e instanceof n)throw new Error("Plugin must instance of : "+n.name);return e.install(this),this.trigger("plugin.installed",e),this}},{key:"detach",value:function(e){if(!e instanceof n)throw new Error("Plugin must instance of : "+n.name);return e.uninstall(this),this.trigger("plugin.uninstalled",e),this}},{key:"on",value:function(e,t){return void 0===this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(t),this}},{key:"off",value:function(e){return delete this._listeners[e],this}},{key:"trigger",value:function(e,t){var n=[];return this.listeners(e).forEach(function(e){n.push(e(t))}),n}},{key:"listeners",value:function(e){return void 0===this._listeners[e]?[]:this._listeners[e]}},{key:"confirm",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){e=e||"Are you sure?";var n=confirm(e);return t(n),n})},{key:"addMessage",value:function(t,n){var r=e(this.options.selector.message);return Phoenix.Theme.renderMessage(r,t,n),this}},{key:"removeMessages",value:function(){var t=e(this.options.selector.message);return Phoenix.Theme.removeMessages(t),this}},{key:"keepAlive",value:function(e,t){return window.setInterval(function(){var t=void 0;try{t=new XMLHttpRequest}catch(e){}t&&(t.open("GET",e,!0),t.send(null))},t)}},{key:"plugin",value:function(t,n){var r=this;return e.fn[t]=function(){if(!this.data("phoenix."+t)){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var s=new(Function.prototype.bind.apply(n,[null].concat([this],i)));this.data("phoenix."+t,s),r.trigger("jquery.plugin.created",{name:t,ele:this,instance:s})}var u=this.data("phoenix."+t);return r.trigger("jquery.plugin.get",{name:t,ele:this,instance:u}),u},this}}]),t}(),n=function(){function t(n){var r=this;_classCallCheck(this,t),this.phoenix=n;var i=this.constructor.is.toLowerCase();this.phoenix.options[i]=e.extend(!0,this.phoenix.options[i],this.constructor.defaultOptions,this.phoenix.options[i]),this.created(),e(function(){return r.ready()})}return _createClass(t,[{key:"options",get:function(){return this.phoenix.options[this.constructor.is.toLowerCase()]}}],[{key:"install",value:function(e){var t=new this(e);this.createProxies(e,t)}},{key:"uninstall",value:function(e){var t=new this(e);this.resetProxies(e,t)}},{key:"is",get:function(){throw new Error('Please add "is" property to Phoenix Plugin: '.this.constructor.name)}},{key:"proxies",get:function(){return{}}},{key:"defaultOptions",get:function(){return{}}}]),_createClass(t,[{key:"created",value:function(){}},{key:"ready",value:function(){}},{key:"loaded",value:function(){}}],[{key:"createProxies",value:function(e,t){if(void 0===t.constructor.proxies)return this;this.resetProxies(e,t),e[t.constructor.is]=t;var n=t.constructor.proxies,r=function(r){if(!n.hasOwnProperty(r))return"continue";var i=n[r];if(void 0!==e[r])throw new Error("Property: "+r+" has exists in Phoenix instance.");if("function"==typeof i)e[r]=i;else{if(void 0===t[i])throw new Error('Proxy property: "'+i+'" not found in Plugin: '+t.constructor.name);"function"==typeof t[i]?e[r]=function(){return t[i].apply(t,arguments)}:Object.defineProperties(e,r,{get:function(){return t[i]},set:function(e){t[i]=e}})}};for(var i in n)r(i)}},{key:"resetProxies",value:function(e,t){var n="string"==typeof t?t:t.constructor.is;if(e[n]&&(t=e[n]),void 0!==t.constructor.proxies){for(var r in t.constructor.proxies)delete e[r];delete e[t.constructor.is]}}}]),t}(),r=function(t){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return _inherits(r,n),_createClass(r,[{key:"createPlugin",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.mainSelector=t;for(var i=arguments.length,o=Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];return(n=e(t))[this.constructor.pluginName].apply(n,[r,this.phoenix].concat(o))}}],[{key:"install",value:function(e){_get(r.__proto__||Object.getPrototypeOf(r),"install",this).call(this,e),e.plugin(this.pluginName,this.pluginClass)}},{key:"pluginName",get:function(){throw new Error("Please provide a plugin name.")}},{key:"pluginClass",get:function(){throw new Error("Please provide a class as plugin instance.")}}]),r}();window.Phoenix=new t,window.PhoenixPlugin=n,window.PhoenixJQueryPlugin=r}(jQuery),function(e){var t=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=!1,i=!1;return e.on("jquery.plugin.created",function(t){r||"form"!==t.name||(["delete","get","patch","post","put","sendDelete","submit"].forEach(function(n){e[n]=function(){var e;return(e=t.instance)[n].apply(e,arguments)}}),r=!0),i||"grid"!==t.name||(["toggleFilter","sort","checkRow","updateRow","doTask","batch","copyRow","deleteList","deleteRow","toggleAll","countChecked","getChecked","hasChecked","reorderAll","reorder"].forEach(function(n){e.Grid[n]=function(){var e;return(e=t.instance)[n].apply(e,arguments)}}),i=!0)}),n}return _inherits(t,PhoenixPlugin),_createClass(t,null,[{key:"install",value:function(e){_get(t.__proto__||Object.getPrototypeOf(t),"install",this).call(this,e),e.Theme=e.UI}},{key:"is",get:function(){return"Legacy"}}]),_createClass(t,[{key:"ready",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this)}}]),t}();window.PhoenixLegacy=t}(jQuery);