{"version":3,"sources":["multiselect.js"],"names":["$","plugin","defaultOptions","duration","PhoenixMultiSelect","$element","options","self","form","boxes","find","last","extend","parent","css","on","event","select","prototype","element","shiftKey","start","index","end","chs","slice","Math","min","max","each","i","e","setTimeout","checked","length","fn","data","jQuery"],"mappings":";;AAAA;;;;;;;AAOA;;;AAGA,CAAC,CAAC,UAASA,CAAT,EAAY;AACZ;;;;;AAKA,MAAIC,SAAS,aAAb;;AAEA,MAAIC,iBAAiB;AACnBC,cAAU;AADS,GAArB;;AAIA;;;;;;;;AAQA,MAAIC,qBAAqB,SAArBA,kBAAqB,CAASC,QAAT,EAAmBC,OAAnB,EAA4B;AACnD,QAAIC,OAAO,IAAX;AACA,SAAKC,IAAL,GAAYH,QAAZ;AACA,SAAKI,KAAL,GAAaJ,SAASK,IAAT,CAAc,oCAAd,CAAb;AACA,SAAKC,IAAL,GAAY,KAAZ;AACA,SAAKL,OAAL,GAAeN,EAAEY,MAAF,CAAS,EAAT,EAAaV,cAAb,EAA6BI,OAA7B,CAAf;;AAEA,SAAKG,KAAL,CAAWI,MAAX,GAAoBC,GAApB,CAAwB,aAAxB,EAAuC,MAAvC;;AAEA,SAAKL,KAAL,CAAWM,EAAX,CAAc,OAAd,EAAuB,UAASC,KAAT,EAAgB;AACrCT,WAAKU,MAAL,CAAY,IAAZ,EAAkBD,KAAlB;AACD,KAFD;AAGD,GAZD;;AAcAZ,qBAAmBc,SAAnB,GAA+B;AAC7B;;;;;;AAMAD,YAAQ,gBAASE,OAAT,EAAkBH,KAAlB,EAAyB;AAC/B,UAAI,CAAC,KAAKL,IAAV,EAAgB;AACd,aAAKA,IAAL,GAAYQ,OAAZ;;AAEA;AACD;;AAED,UAAIH,MAAMI,QAAV,EAAoB;AAClB,YAAIb,OAAO,IAAX;AACA,YAAIc,QAAQ,KAAKZ,KAAL,CAAWa,KAAX,CAAiBH,OAAjB,CAAZ;AACA,YAAII,MAAM,KAAKd,KAAL,CAAWa,KAAX,CAAiB,KAAKX,IAAtB,CAAV;;AAEA,YAAIa,MAAM,KAAKf,KAAL,CAAWgB,KAAX,CAAiBC,KAAKC,GAAL,CAASN,KAAT,EAAgBE,GAAhB,CAAjB,EAAuCG,KAAKE,GAAL,CAASP,KAAT,EAAgBE,GAAhB,IAAuB,CAA9D,CAAV;;AAEAvB,UAAE6B,IAAF,CAAOL,GAAP,EAAY,UAASM,CAAT,EAAYC,CAAZ,EAAe;AACzB,cAAIxB,KAAKD,OAAL,CAAaH,QAAjB,EAA2B;AACzB6B,uBAAW,YAAW;AACpBD,gBAAEE,OAAF,GAAY1B,KAAKI,IAAL,CAAUsB,OAAtB;AACD,aAFD,EAEI1B,KAAKD,OAAL,CAAaH,QAAb,GAAwBqB,IAAIU,MAA7B,GAAuCJ,CAF1C;AAGD,WAJD,MAKK;AACHC,cAAEE,OAAF,GAAY1B,KAAKI,IAAL,CAAUsB,OAAtB;AACD;AACF,SATD;AAUD;;AAED,WAAKtB,IAAL,GAAYQ,OAAZ;AACD;AAlC4B,GAA/B;;AAqCAnB,IAAEmC,EAAF,CAAKlC,MAAL,IAAe,UAASK,OAAT,EAAkB;AAC/B,QAAI,CAAC,KAAK8B,IAAL,CAAU,aAAanC,MAAvB,CAAL,EAAqC;AACnC,WAAKmC,IAAL,CAAU,aAAanC,MAAvB,EAA+B,IAAIG,kBAAJ,CAAuB,IAAvB,EAA6BE,OAA7B,CAA/B;AACD;;AAED,WAAO,KAAK8B,IAAL,CAAU,aAAanC,MAAvB,CAAP;AACD,GAND;AAQD,CA/EA,EA+EEoC,MA/EF","file":"multiselect.js","sourcesContent":["/**\r\n * Part of Phoenix project.\r\n *\r\n * @copyright  Copyright (C) 2016 LYRASOFT. All rights reserved.\r\n * @license    GNU General Public License version 2 or later.\r\n */\r\n\r\n/**\r\n * PhoenixMultiSelect\r\n */\r\n;(function($) {\r\n  /**\r\n   * Plugin name.\r\n   *\r\n   * @type {string}\r\n   */\r\n  var plugin = 'multiselect';\r\n\r\n  var defaultOptions = {\r\n    duration: 100\r\n  };\r\n\r\n  /**\r\n   * Multi Select.\r\n   *\r\n   * @param {jQuery} $element\r\n   * @param {Object} options\r\n   *\r\n   * @constructor\r\n   */\r\n  var PhoenixMultiSelect = function($element, options) {\r\n    var self = this;\r\n    this.form = $element;\r\n    this.boxes = $element.find('input.grid-checkbox[type=checkbox]');\r\n    this.last = false;\r\n    this.options = $.extend({}, defaultOptions, options);\r\n\r\n    this.boxes.parent().css('user-select', 'none');\r\n\r\n    this.boxes.on('click', function(event) {\r\n      self.select(this, event);\r\n    });\r\n  };\r\n\r\n  PhoenixMultiSelect.prototype = {\r\n    /**\r\n     * Do select.\r\n     *\r\n     * @param {Element} element\r\n     * @param {Event}   event\r\n     */\r\n    select: function(element, event) {\r\n      if (!this.last) {\r\n        this.last = element;\r\n\r\n        return;\r\n      }\r\n\r\n      if (event.shiftKey) {\r\n        var self = this;\r\n        var start = this.boxes.index(element);\r\n        var end = this.boxes.index(this.last);\r\n\r\n        var chs = this.boxes.slice(Math.min(start, end), Math.max(start, end) + 1);\r\n\r\n        $.each(chs, function(i, e) {\r\n          if (self.options.duration) {\r\n            setTimeout(function() {\r\n              e.checked = self.last.checked;\r\n            }, (self.options.duration / chs.length) * i);\r\n          }\r\n          else {\r\n            e.checked = self.last.checked;\r\n          }\r\n        })\r\n      }\r\n\r\n      this.last = element;\r\n    }\r\n  };\r\n\r\n  $.fn[plugin] = function(options) {\r\n    if (!this.data('phoenix.' + plugin)) {\r\n      this.data('phoenix.' + plugin, new PhoenixMultiSelect(this, options));\r\n    }\r\n\r\n    return this.data('phoenix.' + plugin);\r\n  };\r\n\r\n})(jQuery);\r\n"]}