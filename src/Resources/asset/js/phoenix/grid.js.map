{"version":3,"sources":["grid.js"],"names":["$","PhoenixGrid","grid","PhoenixGridElement","PhoenixJQueryPlugin","mainSelector","selector","search","container","button","clearButton","filter","sort","element","options","phoenix","form","extend","constructor","defaultOptions","core","ui","UI","Error","searchContainer","find","searchClearButton","filterContainer","filterButton","sortButtons","registerEvents","click","val","submit","event","self","toggleFilter","stopPropagation","preventDefault","ordering","direction","orderingInput","length","append","directionInput","put","row","value","ch","checked","url","queries","toggleAll","checkRow","patch","task","updateRow","post","message","__","confirm","isConfirm","msg","deleteList","duration","checkboxes","each","i","e","setTimeout","getChecked","result","push","Phoenix","Translator","translate","countChecked","alert","origin","originOrdering","split","inputs","$this","data","tr","parents","group","siblings","prop","batch","delta","doTask","window","jQuery"],"mappings":"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","file":"grid.js","sourcesContent":["/**\n * Part of Phoenix project.\n *\n * @copyright  Copyright (C) 2016 LYRASOFT. All rights reserved.\n * @license    GNU General Public License version 2 or later.\n */\n\n/**\n * PhoenixGrid\n */\n;(function($) {\n  \"use strict\";\n\n  class PhoenixGrid extends PhoenixJQueryPlugin {\n    static get is() { return 'Grid'; }\n\n    static get proxies() {\n      return {\n        grid: 'createPlugin'\n      };\n    }\n\n    /**\n     * Plugin name.\n     * @returns {string}\n     */\n    static get pluginName() { return 'grid' }\n\n    static get pluginClass() { return PhoenixGridElement };\n\n    /**\n     * Default options.\n     * @returns {Object}\n     */\n    static get defaultOptions() { \n      return {};\n    }\n  }\n  \n  class PhoenixGridElement {\n    static get defaultOptions() {\n      return {\n        mainSelector: '',\n        selector: {\n          search: {\n            container: '.search-container',\n            button: '.search-button',\n            clearButton: '.search-clear-button'\n          },\n          filter: {\n            container: '.filter-container',\n            button: '.filter-toggle-button'\n          },\n          sort: {\n            button: 'a[data-sort-button]'\n          }\n        }\n      }\n    }\n\n    constructor(element, options, phoenix) {\n      this.form = element;\n      this.options = $.extend(true, {}, this.constructor.defaultOptions, options);\n      this.phoenix = phoenix;\n      this.core = phoenix.form(options.mainSelector);\n      this.ui = phoenix.UI;\n\n      if (!this.core) {\n        throw new Error('PhoenixGrid is dependent on PhoenixForm');\n      }\n\n      if (!this.ui) {\n        throw new Error('PhoenixGrid is dependent on PhoenixUI');\n      }\n\n      const selector = this.options.selector;\n\n      this.searchContainer = this.form.find(selector.search.container);\n      //this.searchButton = this.form.find(selector.search.button);\n      this.searchClearButton = this.form.find(selector.search.clearButton);\n      this.filterContainer = this.form.find(selector.filter.container);\n      this.filterButton = this.form.find(selector.filter.button);\n      this.sortButtons = this.form.find(selector.sort.button);\n\n      this.registerEvents();\n    }\n\n    /**\n     * Start this object and events.\n     */\n    registerEvents() {\n      this.searchClearButton.click(() => {\n        this.searchContainer.find('input, textarea, select').val('');\n        this.filterContainer.find('input, textarea, select').val('');\n\n        this.form.submit();\n      });\n\n      this.filterButton.click(function(event) {\n        self.toggleFilter();\n        event.stopPropagation();\n        event.preventDefault();\n      });\n\n      this.sortButtons.click(function(event) {\n        self.sort(this, event);\n      });\n    }\n\n    /**\n     * Toggle filter bar.\n     *\n     * @returns {PhoenixGridElement}\n     */\n    toggleFilter() {\n      this.ui.toggleFilter(this.filterContainer, this.filterButton);\n\n      return this;\n    }\n\n    /**\n     * Sort two items.\n     *\n     * @param {string} ordering\n     * @param {string} direction\n     *\n     * @returns {boolean}\n     */\n    sort(ordering, direction) {\n      let orderingInput = this.form.find('input[name=list_ordering]');\n\n      if (!orderingInput.length) {\n        orderingInput = $('<input name=\"list_ordering\" type=\"hidden\" value=\"\" />');\n\n        this.form.append(orderingInput);\n      }\n\n      let directionInput = this.form.find('input[name=list_direction]');\n\n      if (!directionInput.length) {\n        directionInput = $('<input name=\"list_direction\" type=\"hidden\" value=\"\" />');\n\n        this.form.append(directionInput);\n      }\n\n      orderingInput.val(ordering);\n      directionInput.val(direction);\n\n      return this.core.put();\n    }\n\n    /**\n     * Check a row's checkbox.\n     *\n     * @param {number}  row\n     * @param {boolean} value\n     */\n    checkRow(row, value = true) {\n      const ch = this.form.find('input.grid-checkbox[data-row-number=' + row + ']');\n\n      if (!ch.length) {\n        throw new Error('Checkbox of row: ' + row + ' not found.');\n      }\n\n      ch[0].checked = value;\n    }\n\n    /**\n     * Update a row.\n     *\n     * @param  {number} row\n     * @param  {string} url\n     * @param  {Object} queries\n     *\n     * @returns {boolean}\n     */\n    updateRow(row, url, queries) {\n      this.toggleAll(false);\n\n      this.checkRow(row);\n\n      return this.core.patch(url, queries);\n    }\n\n    /**\n     * Update a row with batch task.\n     *\n     * @param  {string} task\n     * @param  {number} row\n     * @param  {string} url\n     * @param  {Object} queries\n     *\n     * @returns {boolean}\n     */\n    doTask(task, row, url, queries) {\n      queries = queries || {};\n\n      queries.task = task;\n\n      return this.updateRow(row, url, queries);\n    }\n\n    /**\n     * Batch update items.\n     *\n     * @param  {string} task\n     * @param  {string} url\n     * @param  {Object} queries\n     *\n     * @returns {boolean}\n     */\n    batch(task, url, queries) {\n      queries = queries || {};\n\n      queries.task = task;\n\n      return this.core.patch(url, queries);\n    }\n\n    /**\n     * Copy a row.\n     *\n     * @param  {number} row\n     * @param  {string} url\n     * @param  {Object} queries\n     *\n     * @returns {boolean}\n     */\n    copyRow(row, url, queries) {\n      this.toggleAll(false);\n\n      this.checkRow(row);\n\n      return this.core.post(url, queries);\n    }\n\n    /**\n     * Delete checked items.\n     *\n     * @param  {string} message\n     * @param  {string} url\n     * @param  {Object} queries\n     *\n     * @returns {boolean}\n     */\n    deleteList(message, url, queries) {\n      message = message || this.phoenix.__('phoenix.message.delete.confirm');\n\n      this.phoenix.confirm(message, isConfirm => {\n        if (isConfirm) {\n          this.core['delete'](url, queries);\n        }\n      });\n\n      return true;\n    }\n\n    /**\n     * Delete an itme.\n     *\n     * @param  {number} row\n     * @param  {string} msg\n     * @param  {string} url\n     * @param  {Object} queries\n     *\n     * @returns {boolean}\n     */\n    deleteRow(row, msg, url, queries) {\n      this.toggleAll(false);\n\n      this.checkRow(row);\n\n      return this.deleteList(msg, url, queries);\n    }\n\n    /**\n     * Toggle all checkboxes.\n     *\n     * @param  {boolean}          value     Checked or unchecked.\n     * @param  {number|boolean}   duration  Duration to check all.\n     */\n    toggleAll(value, duration = 100) {\n      const checkboxes = this.form.find('input.grid-checkbox[type=checkbox]');\n\n      $.each(checkboxes, function(i, e) {\n        if (duration) {\n          // A little pretty effect\n          setTimeout(function() {\n            e.checked = value;\n          }, (duration / checkboxes.length) * i);\n        }\n        else {\n          e.checked = value;\n        }\n      });\n\n      return this;\n    }\n\n    /**\n     * Count checked checkboxes.\n     *\n     * @returns {int}\n     */\n    countChecked() {\n      return this.getChecked().length;\n    }\n\n    /**\n     * Get Checked boxes.\n     *\n     * @returns {Element[]}\n     */\n    getChecked() {\n      const checkboxes = this.form.find('input.grid-checkbox[type=checkbox]'),\n        result = [];\n\n      $.each(checkboxes, function(i, e) {\n        if (e.checked) {\n          result.push(e);\n        }\n      });\n\n      return result;\n    }\n\n    /**\n     * Validate there has one or more checked boxes.\n     *\n     * @param   {string}  msg\n     * @param   {Event}   event\n     *\n     * @returns {PhoenixGridElement}\n     */\n    hasChecked(msg, event) {\n      msg = msg || Phoenix.Translator.translate('phoenix.message.grid.checked');\n\n      if (!this.countChecked()) {\n        alert(msg);\n\n        // If you send event object as second argument, we will stop all actions.\n        if (event) {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n\n        throw new Error(msg);\n      }\n\n      return this;\n    }\n\n    /**\n     * Reorder all.\n     *\n     * @param   {string}  url\n     * @param   {Object}  queries\n     *\n     * @returns {boolean}\n     */\n    reorderAll(url, queries) {\n      const self = this;\n      const origin = this.form.find('input[name=origin_ordering]');\n\n      // If origin exists, we diff them and only send changed group.\n      if (origin.length) {\n        const originOrdering = origin.val().split(',');\n        const inputs = this.form.find('.ordering-control input');\n\n        this.toggleAll(false);\n\n        inputs.each(function(i) {\n          const $this = $(this);\n\n          if ($this.val() !== originOrdering[i]) {\n            // Check self\n            self.checkRow($this.data('order-row'));\n\n            const tr = $this.parents('tr');\n            const group = tr.data('order-group');\n\n            // Check same group boxes\n            if (group !== '') {\n              tr.siblings('[data-order-group=' + group + ']')\n                .find('input.grid-checkbox')\n                .prop('checked', true);\n            }\n          }\n        });\n      }\n\n      return this.batch('reorder', url, queries);\n    }\n\n    /**\n     * Reorder items.\n     *\n     * @param  {int}     row\n     * @param  {int}     delta\n     * @param  {string}  url\n     * @param  {Object}  queries\n     *\n     * @returns {boolean}\n     */\n    reorder(row, delta, url, queries) {\n      queries = queries || {};\n      queries.delta = delta;\n\n      return this.doTask('reorder', row, url, queries);\n    }\n  }\n\n  window.PhoenixGrid = PhoenixGrid;\n\n})(jQuery);\n"]}