{"version":3,"sources":["theme/bootstrap4.js"],"names":["$","PhoenixUIBootstrap4","messageContainer","options","messageSelector","validation","state","$input","help","$control","parents","first","$form","self","hasClass","addClass","removeValidateResponse","STATE_NONE","icon","color","STATE_SUCCESS","STATE_EMPTY","STATE_FAIL","setTimeout","addValidateResponse","type","attr","feedback","helpElement","tagName","prop","toLowerCase","append","parent","$element","find","remove","removeClass","msg","message","i","length","children","each","container","button","showClass","hideClass","iconShowClass","iconHideClass","hide","show","renderMessage","PhoenixPlugin","window","jQuery"],"mappings":"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","file":"bootstrap4.js","sourcesContent":["/**\r\n * Part of Phoenix project.\r\n *\r\n * @copyright  Copyright (C) 2016 LYRASOFT. All rights reserved.\r\n * @license    GNU General Public License version 2 or later.\r\n */\r\n\r\n(($) => {\r\n  \"use strict\";\r\n\r\n  /**\r\n   * Bootstrap Theme\r\n   */\r\n  class PhoenixUIBootstrap4 extends PhoenixPlugin {\r\n    static get is() { return 'UI'; }\r\n\r\n    static get defaultOptions() {\r\n      return {\r\n        messageSelector: '.message-wrap'\r\n      };\r\n    }\r\n\r\n    static get proxies() {\r\n      return {\r\n        renderMessage: 'renderMessage'\r\n      };\r\n    }\r\n\r\n    ready() {\r\n      super.ready();\r\n\r\n      this.messageContainer = $(this.options.messageSelector);\r\n    }\r\n\r\n    /**\r\n     * Show Validation response.\r\n     *\r\n     * @param {PhoenixValidation} validation\r\n     * @param {string}            state\r\n     * @param {jQuery}            $input\r\n     * @param {string}            help\r\n     */\r\n    showValidateResponse(validation, state, $input, help) {\r\n      const $control = $input.parents('.form-group').first();\r\n      const $form = $input.parents('form');\r\n      const self = this;\r\n\r\n      // Add class to form\r\n      if (!$form.hasClass('was-validated')) {\r\n        $form.addClass('was-validated');\r\n      }\r\n\r\n      this.removeValidateResponse($control);\r\n\r\n      if (state != validation.STATE_NONE) {\r\n        let icon, color;\r\n\r\n        switch (state) {\r\n          case validation.STATE_SUCCESS:\r\n            color = 'success';\r\n            icon = 'fa fa-check';\r\n            break;\r\n\r\n          case validation.STATE_EMPTY:\r\n            color = 'error';\r\n            icon = 'fa fa-remove fa-times';\r\n            break;\r\n\r\n          case validation.STATE_FAIL:\r\n            color = 'warning';\r\n            icon = 'fa fa-warning';\r\n            break;\r\n        }\r\n\r\n        // Delay 100 to make sure addClass after removeClass\r\n        setTimeout(function() {\r\n          self.addValidateResponse($control, $input, icon, color, help);\r\n        }, 100);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add validate effect to input, just override this method to fit other templates.\r\n     *\r\n     * @param {jQuery} $control\r\n     * @param {jQuery} $input\r\n     * @param {string} icon\r\n     * @param {string} type\r\n     * @param {string} help\r\n     */\r\n    addValidateResponse($control, $input, icon, type, help) {\r\n      let color;\r\n\r\n      color = type === 'success' ? 'valid' : 'invalid';\r\n\r\n      $input.addClass('is-' + color);\r\n\r\n      if ($control.attr('data-' + type + '-message')) {\r\n        help = $control.attr('data-' + type + '-message');\r\n      }\r\n\r\n      if ($input.attr('data-' + type + '-message')) {\r\n        help = $input.attr('data-' + type + '-message');\r\n      }\r\n\r\n      if (help) {\r\n        const feedback = '<span class=\"' + icon + '\" aria-hidden=\"true\"></span>';\r\n        const helpElement = $('<small class=\"' + color + '-feedback form-control-feedback\">' + feedback + ' ' + help + '</small>');\r\n\r\n        const tagName = $input.prop('tagName').toLowerCase();\r\n\r\n        if (tagName === 'div') {\r\n          $input.append(helpElement);\r\n        } else {\r\n          $input.parent().append(helpElement);\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Remove validation response.\r\n     *\r\n     * @param {jQuery} $element\r\n     */\r\n    removeValidateResponse($element) {\r\n      $element.find('.form-control-feedback').remove();\r\n      $element.find('input')\r\n        .removeClass('is-invalid')\r\n        .removeClass('is-valid');\r\n    }\r\n\r\n    /**\r\n     * Render message.\r\n     *\r\n     * @param {string|Array} msg\r\n     * @param {string}       type\r\n     */\r\n    renderMessage(msg, type) {\r\n      type = type || 'info';\r\n\r\n      let message = this.messageContainer.find('div.alert.alert-' + type);\r\n      let i;\r\n\r\n      if (!message.length) {\r\n        message = $('<div class=\"alert alert-' + type + '\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"></div>');\r\n        this.messageContainer.append(message);\r\n      }\r\n\r\n      if (typeof msg === 'string') {\r\n        msg = [msg];\r\n      }\r\n\r\n      for (i in msg) {\r\n        message.append('<p>' + msg[i] + '</p>');\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Remove all messages.\r\n     */\r\n    removeMessages() {\r\n      this.messageContainer.children().each(function() {\r\n        this.remove();\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Toggle filter bar.\r\n     *\r\n     * @param {jQuery} container\r\n     * @param {jQuery} button\r\n     */\r\n    toggleFilter(container, button) {\r\n      const showClass = button.attr('data-class-show') || 'btn-primary';\r\n      const hideClass = button.attr('data-class-hide') || 'btn-default';\r\n\r\n      const icon = button.find('span.filter-button-icon');\r\n      const iconShowClass = icon.attr('data-class-show') || 'fa fa-angle-up';\r\n      const iconHideClass = icon.attr('data-class-hide') || 'fa fa-angle-down';\r\n\r\n      if (container.hasClass('shown')) {\r\n        button.removeClass(showClass).addClass(hideClass);\r\n        container.hide('fast');\r\n        container.removeClass('shown');\r\n\r\n        icon.removeClass(iconShowClass).addClass(iconHideClass);\r\n      } else {\r\n        button.removeClass(hideClass).addClass(showClass);\r\n        container.show('fast');\r\n        container.addClass('shown');\r\n\r\n        icon.removeClass(iconHideClass).addClass(iconShowClass);\r\n      }\r\n    }\r\n  }\r\n\r\n  window.PhoenixUIBootstrap4 = PhoenixUIBootstrap4;\r\n\r\n})(jQuery);\r\n"]}