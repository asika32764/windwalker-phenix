{"version":3,"sources":["button-radio.js"],"names":["$","plugin","defaultOptions","selector","buttonClass","activeClass","color","green","red","blue","ButtonRadio","element","options","extend","colors","$radios","find","addClass","on","$btn","e","currentTarget","$group","parent","$input","prop","default","removeClass","data","trigger","each","$radio","$label","$text","text","hide","prepend","val","attr","push","unique","fn","jQuery"],"mappings":"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","file":"button-radio.js","sourcesContent":["/**\n * Part of Phoenix project.\n *\n * @copyright  Copyright (C) 2016 LYRASOFT. All rights reserved.\n * @license    GNU General Public License version 2 or later.\n */\n\n(($) => {\n  \"use strict\";\n\n  const plugin = 'buttonRadio';\n\n  const defaultOptions = {\n    selector: '.btn-group .radio',\n    buttonClass: 'btn',\n    activeClass: 'active',\n    color: {\n      'default': 'btn-default btn-outline-secondary',\n      green: 'btn-success',\n      red: 'btn-danger',\n      blue: 'btn-primary'\n    }\n  };\n\n  /**\n   * Button Radio\n   *\n   * @param {HTMLElement} element\n   * @param {Object}      options\n   *\n   * @constructor\n   */\n  class ButtonRadio {\n    constructor(element, options) {\n      this.element = $(element);\n      this.options = $.extend(true, {}, defaultOptions, options);\n      let colors = [];\n\n      // Turn radios into btn-group\n      const $radios = this.element.find(this.options.selector);\n\n      options = this.options;\n\n      $radios.addClass(options.buttonClass)\n        .addClass(options.color['default']);\n\n      $radios.on('click', e => {\n        const $btn = $(e.currentTarget);\n        const $group = $btn.parent().find('.' + options.buttonClass);\n        const $input = $btn.find('input[type=radio]');\n\n        if ($input.prop('disabled') || $input.prop('readonly')) {\n          return;\n        }\n\n        if (!$input.prop('checked')) {\n          $group\n            .addClass(options.color.default)\n            .removeClass(options.activeClass)\n            .removeClass(colors);\n\n          $btn.addClass(options.activeClass).addClass($input.data('color-class')).removeClass(options.color.default);\n\n          $input.prop('checked', true);\n          $input.trigger('change');\n        }\n      });\n\n      $radios.each(function () {\n        const $radio = $(this);\n        const $input = $radio.find('input');\n        const $label = $radio.find('label');\n        const $text = $('<span>' + $label.text() + '</span>');\n\n        $label.hide();\n        $input.hide();\n        $radio.prepend($text);\n        $radio.removeClass('radio');\n\n        // Prepare color schema\n        let color = $input.data('color-class');\n\n        if (color == null) {\n          switch ($input.val()) {\n            case '':\n              color = options.color.blue;\n              break;\n\n            case '0':\n              color = options.color.red;\n              break;\n\n            default:\n              color = options.color.green;\n              break;\n          }\n\n          $input.attr('data-color-class', color);\n        }\n\n        colors.push(color);\n\n        if ($input.prop('checked')) {\n          $radio.removeClass(options.color.default).addClass(options.activeClass).addClass(color);\n        }\n\n        if ($input.prop('disabled')) {\n          $radio.addClass('disabled');\n        }\n\n        if ($input.prop('readonly')) {\n          $radio.addClass('readonly');\n        }\n      });\n\n      $radios.parent().trigger('button-radio.loaded');\n\n      // Make color elements unique\n      colors = $.unique(colors);\n    }\n  }\n\n  /**\n   * Push to plugins.\n   *\n   * @param   {Object} options\n   *\n   * @returns {ButtonRadio}\n   */\n  $.fn[plugin] = function (options) {\n    if (!this.data('phoenix.' + plugin)) {\n      this.data('phoenix.' + plugin, new ButtonRadio(this, options));\n    }\n\n    return this.data('phoenix.' + plugin);\n  };\n})(jQuery);\n"]}