"use strict";var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}!function(t){var e=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,PhoenixJQueryPlugin),_createClass(e,null,[{key:"is",get:function(){return"Form"}},{key:"proxies",get:function(){return{form:"createPlugin"}}},{key:"pluginName",get:function(){return"form"}},{key:"pluginClass",get:function(){return n}},{key:"defaultOptions",get:function(){return{}}}]),e}(),n=function(){function e(n,r){_classCallCheck(this,e),r=t.extend(!0,{},this.constructor.defaultOptions,r),this.form=n,this.options=r,this.bindEvents()}return _createClass(e,[{key:"bindEvents",value:function(){var e=this;this.form.data("toolbar")&&t(this.form.data("toolbar")).find("*[data-action]").on("click",function(t){e.form.trigger("phoenix.submit",t.currentTarget)}),this.form.on("phoenix.submit",function(n,r){var o=t(r),i=o.data("action"),u=o.data("target")||null,a=o.data("query")||{};a.task=o.data("task")||null,e[i](u,a)})}},{key:"submit",value:function(e,n,r,o){var i=this.form;if(o){var u=i.find('input[name="_method"]');u.length||(u=t('<input name="_method" type="hidden">'),i.append(u)),u.val(o)}if(n){var a=void 0;t.each(n,function(e,n){(a=i.find('input[name="'+e+'"]')).length||(a=t('<input name="'+e+'" type="hidden">'),i.append(a)),a.val(n)})}return e&&i.attr("action",e),r&&i.attr("method",r),i.submit(),!0}},{key:"get",value:function(t,e,n){return this.submit(t,e,"GET",n)}},{key:"post",value:function(t,e,n){return n=n||"POST",this.submit(t,e,"POST",n)}},{key:"put",value:function(t,e){return this.post(t,e,"PUT")}},{key:"patch",value:function(t,e){return this.post(t,e,"PATCH")}},{key:"sendDelete",value:function(t,e){return this.delete(t,e)}},{key:"delete",value:function(t,e){return this.post(t,e,"DELETE")}}]),e}();window.PhoenixForm=e}(jQuery);