{"version":3,"sources":["validation.js"],"names":["$","handlers","PhoenixValidation","PhoenixValidationElement","validation","PhoenixJQueryPlugin","element","options","phoenix","STATE_SUCCESS","STATE_FAIL","STATE_NONE","STATE_EMPTY","form","extend","constructor","defaultOptions","validators","theme","inputs","length","attr","registerDefaultValidators","registerEvents","find","forEach","input","add","registerInputEvents","push","filter","i","e","self","inValid","scroll","enabled","addClass","getInputs","each","result","validate","target","is","parents","animate","scrollTop","offset","top","duration","$input","help","showResponse","setCustomValidity","validates","split","val","validator","handler","notice","__","checkValidity","state","validity","valueMissing","isDebug","console","warn","key","type","camelTo","trigger","$element","name","on","event","validateAll","stopImmediatePropagation","stopPropagation","preventDefault","events","currentTarget","hasOwnProperty","addValidator","str","sep","replace","toLowerCase","username","value","regex","RegExp","test","numeric","email","punycode","toASCII","url","alnum","color","creditcard","ip","selector","window","jQuery"],"mappings":"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","sourcesContent":["/**\n * Part of Phoenix project.\n *\n * @copyright  Copyright (C) 2016 LYRASOFT. All rights reserved.\n * @license    GNU General Public License version 2 or later;\n */\n\n/**\n * PhoenixValidation\n */\n;(function($) {\n  \"use strict\";\n\n  /**\n   * Default handlers\n   *\n   * @type {Object}\n   */\n  const handlers = {};\n\n  /**\n   * Class init.\n   *\n   * @param {jQuery} element\n   * @param {Object} options\n   * @constructor\n   */\n  class PhoenixValidation extends PhoenixJQueryPlugin {\n    static get is() { return 'Validation' }\n\n    static get pluginName() { return 'validation' }\n\n    static get pluginClass() { return PhoenixValidationElement }\n\n    static get proxies() {\n      return {\n        validation: 'createPlugin'\n      };\n    }\n  }\n\n  class PhoenixValidationElement {\n    static get defaultOptions() {\n      return {\n        enabled: true,\n        events: ['change'],\n        scroll: {\n          enabled: true,\n          offset: -100,\n          duration: 1000\n        }\n      }\n    }\n\n    constructor(element, options, phoenix) {\n      /**\n       * Validate success.\n       *\n       * @type {string}\n       */\n      this.STATE_SUCCESS = 'success';\n\n      /**\n       * Validate fail.\n       *\n       * @type {string}\n       */\n      this.STATE_FAIL = 'fail';\n\n      /**\n       * Pass or required with value.\n       *\n       * @type {string}\n       */\n      this.STATE_NONE = 'none';\n\n      /**\n       * Required with no value.\n       *\n       * @type {string}\n       */\n      this.STATE_EMPTY = 'empty';\n\n      this.form = element || $;\n      this.phoenix = phoenix;\n      this.options = $.extend(true, {}, this.constructor.defaultOptions, options);\n      this.validators = [];\n      this.handlers = {};\n      this.theme = {};\n      this.inputs = [];\n\n      // Stop native validation\n      if (this.form.length) {\n        this.form.attr('novalidate', true);\n      }\n\n      this.registerDefaultValidators();\n      this.registerEvents();\n    }\n\n    getInputs() {\n      const inputs = this.form.find('input, select, textarea');\n\n      this.inputs.forEach(input => inputs.add(input));\n\n      return inputs;\n    }\n\n    /**\n     * Add field.\n     *\n     * @param {*} input\n     * @returns {PhoenixValidationElement}\n     */\n    addField(input) {\n      this.registerInputEvents(input);\n\n      this.inputs.push(input);\n\n      return this;\n    }\n\n    removeField(input) {\n      this.inputs = this.inputs.filter((i, e) => input !== e);\n\n      return this;\n    }\n\n    /**\n     * Validate All.\n     *\n     * @returns {boolean}\n     */\n    validateAll() {\n      const self = this, inValid = [];\n      let scroll = self.options.scroll.enabled;\n\n      if (this.form.length) {\n        this.form.addClass('was-validated');\n      }\n\n      this.getInputs().each((i, input) => {\n        const result = this.validate(input);\n\n        if (!result) {\n          inValid.push(input);\n\n          // Scroll\n          if (scroll) {\n            // Find displayed element\n            let target = $(input);\n\n            if (!target.is(':visible')) {\n              target = target.parents('#' + target.attr('id') + '-control, [data-form-group]');\n            }\n\n            $('html, body').animate({\n              scrollTop: target.offset().top + self.options.scroll.offset\n            }, self.options.scroll.duration);\n\n            scroll = false;\n          }\n        }\n      });\n\n      return inValid.length <= 0;\n    }\n\n    /**\n     * Validate.\n     *\n     * @param {jQuery} input\n     * @returns {boolean}\n     */\n    validate(input) {\n      if (!input) {\n        return true;\n      }\n\n      let $input = $(input);\n      let help;\n      let result = true;\n\n      // Clear state\n      this.showResponse(this.STATE_NONE, $input);\n      input.setCustomValidity('');\n\n      // Check custom validity\n      const validates = ($input.attr('data-validate') || '').split('|');\n\n      if ($input.val() !== '' && validates.length) {\n        for (let i in validates) {\n          const validator = this.validators[validates[i]];\n\n          if (validator && !validator.handler($input.val(), $input)) {\n            help = validator.options.notice;\n\n            if (typeof  help === 'function') {\n              help = help($input, this);\n            }\n\n            // Set failure value as :invalid\n            input.setCustomValidity(this.phoenix.__('phoenix.message.validation.type.mismatch'));\n\n            result = false;\n\n            break;\n          }\n        }\n      }\n\n      // Check native validity\n      if (result) {\n        result = input.checkValidity();\n        this.showResponse(this.STATE_SUCCESS, $input, help);\n      }\n\n      if (result) {\n        return true;\n      }\n\n      const state = input.validity;\n\n      // Handle required message.\n      if (state.valueMissing) {\n        help = $input.attr('data-value-missing-message') || this.phoenix.__('phoenix.message.validation.value.missing');\n        this.phoenix.isDebug() ? console.warn(`[Debug] Field: ${$input.attr('name')} validity state: value-missing.`) : null;\n        this.showResponse(this.STATE_EMPTY, $input, help);\n        return false;\n      }\n\n      // Handle types message\n      for (let key in state) {\n        if (state[key] === true) {\n          const type = camelTo(key, '-');\n\n          help = $input.attr('data-' + type + '-message') || this.phoenix.__('phoenix.message.validation.' + camelTo(key, '.'));\n\n          this.phoenix.isDebug() ? console.warn(`[Debug] Field: ${$input.attr('name')} validity state: ${type}.`) : null;\n\n          break;\n        }\n      }\n\n      this.showResponse(this.STATE_FAIL, $input, help);\n\n      return result;\n    }\n\n    /**\n     * Show response on input.\n     *\n     * @param {string}      state\n     * @param {jQuery}      $input\n     * @param {string|null} help\n     *\n     * @returns {PhoenixValidationElement}\n     */\n    showResponse(state, $input, help = null) {\n      this.phoenix.trigger('validation.response', {state, $input, help, validation: this});\n\n      $input.trigger({\n        type: 'phoenix.validate.input.' + state,\n        input: $input,\n        state: state,\n        help: help\n      });\n\n      return this;\n    }\n\n    /**\n     * Remove responses.\n     *\n     * @param {jQuery} $element\n     *\n     * @returns {PhoenixValidationElement}\n     */\n    removeResponse($element) {\n      this.phoenix.trigger('validation.remove', {$element});\n\n      return this;\n    }\n\n    /**\n     * Add validator handler.\n     *\n     * @param name\n     * @param validator\n     * @param options\n     * @returns {PhoenixValidation}\n     */\n    addValidator(name, validator, options) {\n      options = options || {};\n\n      this.validators[name] = {\n        handler: validator,\n        options: options\n      };\n\n      return this;\n    }\n\n    /**\n     * Register events.\n     */\n    registerEvents() {\n      this.form.on('submit', event => {\n        if (this.options.enabled && !this.validateAll()) {\n          event.stopImmediatePropagation(); // Stop following events\n          event.stopPropagation();\n          event.preventDefault();\n\n          return false;\n        }\n\n        this.form.trigger('phoenix.validate.success');\n\n        return true;\n      });\n\n      this.registerInputEvents(this.getInputs());\n    }\n\n    registerInputEvents($input) {\n      $.each(this.options.events, (i, event) => {\n        $input.on(event, (e) => {\n          this.validate(e.currentTarget);\n        });\n      });\n    }\n\n    /**\n     * Register default validators.\n     */\n    registerDefaultValidators() {\n      for (let name in handlers) {\n        if (handlers.hasOwnProperty(name)) {\n          this.addValidator(name, handlers[name]);\n        }\n      }\n    }\n  }\n\n  function camelTo(str, sep) {\n    return str.replace(/([a-z])([A-Z])/g, `$1${sep}$2`).toLowerCase();\n  }\n\n  handlers.username = function(value, element) {\n    const regex = new RegExp(\"[\\<|\\>|\\\"|\\'|\\%|\\;|\\(|\\)|\\&]\", \"i\");\n    return !regex.test(value);\n  };\n\n  handlers.numeric = function(value, element) {\n    const regex = /^(\\d|-)?(\\d|,)*\\.?\\d*$/;\n    return regex.test(value);\n  };\n\n  handlers.email = function(value, element) {\n    value = punycode.toASCII(value);\n    const regex = /^[a-zA-Z0-9.!#$%&â€™*+\\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n    return regex.test(value);\n  };\n\n  handlers.url = function(value, element) {\n    const regex = /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/i;\n    return regex.test(value);\n  };\n\n  handlers.alnum = function(value, element) {\n    const regex = /^[a-zA-Z0-9]*$/;\n    return regex.test(value);\n  };\n\n  handlers.color = function(value, element) {\n    const regex = /^#(?:[0-9a-f]{3}){1,2}$/;\n    return regex.test(value);\n  };\n\n  /**\n   * @see  http://www.virtuosimedia.com/dev/php/37-tested-php-perl-and-javascript-regular-expressions\n   */\n  handlers.creditcard = function(value, element) {\n    const regex = /^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6011[0-9]{12}|622((12[6-9]|1[3-9][0-9])|([2-8][0-9][0-9])|(9(([0-1][0-9])|(2[0-5]))))[0-9]{10}|64[4-9][0-9]{13}|65[0-9]{14}|3(?:0[0-5]|[68][0-9])[0-9]{11}|3[47][0-9]{13})*$/;\n    return regex.test(value);\n  };\n\n  handlers.ip = function(value, element) {\n    const regex = /^((?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))*$/;\n    return regex.test(value);\n  };\n\n  handlers['password-confirm'] = function (value, element) {\n    const selector = element.attr('data-confirm-target');\n    const target = $(selector);\n\n    return target.val() === value;\n  };\n\n  window.PhoenixValidation = PhoenixValidation;\n\n})(jQuery);\n"],"file":"validation.js"}