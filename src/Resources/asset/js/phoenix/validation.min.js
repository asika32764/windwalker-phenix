"use strict";var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}!function(t){var e={},i=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,PhoenixJQueryPlugin),_createClass(e,null,[{key:"is",get:function(){return"Validation"}},{key:"pluginName",get:function(){return"validation"}},{key:"pluginClass",get:function(){return n}},{key:"proxies",get:function(){return{validation:"createPlugin"}}}]),e}(),n=function(){function i(e,n,s){_classCallCheck(this,i),this.STATE_SUCCESS="success",this.STATE_FAIL="fail",this.STATE_NONE="none",this.STATE_EMPTY="empty",this.form=e||t,this.phoenix=s,this.options=t.extend(!0,{},this.constructor.defaultOptions,n),this.validators=[],this.handlers={},this.theme={},this.inputs=this.form.find("input, select, textarea, div.input-list-container"),this.registerDefaultValidators(),this.registerEvents()}return _createClass(i,null,[{key:"defaultOptions",get:function(){return{events:["change"],scroll:{enabled:!0,offset:-100,duration:1e3}}}}]),_createClass(i,[{key:"addField",value:function(t){return this.inputs=this.inputs.add(t),this}},{key:"removeField",value:function(t){return this.inputs=this.inputs.filter(function(e,i){return t!==i}),this}},{key:"validateAll",value:function(){var e=this,i=[],n=e.options.scroll.enabled;return this.inputs.each(function(){if(!e.validate(this)&&(i.push(this),n)){var s=t(this);s.is(":visible")||(s=s.parents("#"+s.attr("id")+"-control")),t("html, body").animate({scrollTop:s.offset().top+e.options.scroll.offset},e.options.scroll.duration),n=!1}}),i.length<=0}},{key:"validate",value:function(e){var i=t(e),n=void 0,s=void 0;if(i.attr("disabled"))return this.showResponse(this.STATE_NONE,i),!0;if(i.attr("required")||i.hasClass("required")){if(!("radio"!==i.attr("type")&&"checkbox"!==i.attr("type")||i.is(":checked")))return this.showResponse(this.STATE_EMPTY,i),!1;if("div"===i.prop("tagName").toLowerCase()&&i.hasClass("input-list-container")){if(!i.find("input:checked").length)return i.find("input").each(function(){this.setCustomValidity("Please select at least one.")}),this.showResponse(this.STATE_EMPTY,i),!1;i.find("input").each(function(){this.setCustomValidity("")}),this.showResponse(this.STATE_SUCCESS,i)}else if(!i.val()||Array.isArray(i.val())&&0===i.val().length)return this.showResponse(this.STATE_EMPTY,i),!1}if((n=i.attr("class"))&&(s=n.match(/validate-([a-zA-Z0-9_|-]+)/)),!i.val()||!s)return this.showResponse(this.STATE_NONE,i),!0;if(!(s=this.validators[s[1]])||!s.handler)return this.showResponse(this.STATE_SUCCESS,i),!0;if(!s.handler(i.val(),i)){var r=s.options.notice;return"function"==typeof r&&(r=r(i,this)),i[0].setCustomValidity("Input is invalid."),this.showResponse(this.STATE_FAIL,i,r),!1}return this.showResponse(this.STATE_SUCCESS,i),!0}},{key:"showResponse",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.phoenix.trigger("validation.response",{state:t,$input:e,help:i,validation:this}),e.trigger({type:"phoenix.validate."+t,input:e,state:t,help:i}),this}},{key:"removeResponse",value:function(t){return this.phoenix.trigger("validation.remove",{$element:t}),this}},{key:"addValidator",value:function(t,e,i){return i=i||{},this.validators[t]={handler:e,options:i},this}},{key:"registerEvents",value:function(){var e=this,i=this;this.form.on("submit",function(t){return e.validateAll()?(e.form.trigger("phoenix.validate.success"),!0):(t.stopPropagation(),t.preventDefault(),!1)}),t.each(this.options.events,function(){i.inputs.on(this,function(){i.validate(this)})})}},{key:"registerDefaultValidators",value:function(){for(var t in e)e.hasOwnProperty(t)&&this.addValidator(t,e[t])}}]),i}();e.username=function(t,e){return!new RegExp("[<|>|\"|'|%|;|(|)|&]","i").test(t)},e.password=function(t,e){return/^\S[\S ]{2,98}\S$/.test(t)},e.numeric=function(t,e){return/^(\d|-)?(\d|,)*\.?\d*$/.test(t)},e.email=function(t,e){t=punycode.toASCII(t);return/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t)},e.url=function(t,e){t=punycode.toASCII(t);return/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i.test(t)},e.alnum=function(t,e){return/^[a-zA-Z0-9]*$/.test(t)},e.color=function(t,e){return/^#(?:[0-9a-f]{3}){1,2}$/.test(t)},e.creditcard=function(t,e){return/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6011[0-9]{12}|622((12[6-9]|1[3-9][0-9])|([2-8][0-9][0-9])|(9(([0-1][0-9])|(2[0-5]))))[0-9]{10}|64[4-9][0-9]{13}|65[0-9]{14}|3(?:0[0-5]|[68][0-9])[0-9]{11}|3[47][0-9]{13})*$/.test(t)},e.ip=function(t,e){return/^((?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))*$/.test(t)},window.PhoenixValidation=i}(jQuery);