{"version":3,"sources":["multiselect.js"],"names":["$","PhoenixMultiSelect","duration","inputSelector","$element","options","self","extend","constructor","defaultOptions","form","boxes","find","last","parent","css","on","event","select","element","shiftKey","start","index","end","chs","slice","Math","min","max","each","i","e","setTimeout","checked","length","fn","pluginName","data","jQuery"],"mappings":";;;;;;AAAA;;;;;;;AAOA;;;AAGA,CAAC,CAAC,UAASA,CAAT,EAAY;AACZ;;;;;;;;AADY,MASNC,kBATM;AAAA;AAAA;AAAA,0BAUc;AAAE,eAAO,aAAP;AAAsB;AAVtC;AAAA;AAAA,0BAWkB;AAC1B,eAAO;AACLC,oBAAU,GADL;AAELC,yBAAe;AAFV,SAAP;AAID;AAhBS;;AAkBV,gCAAYC,QAAZ,EAAsBC,OAAtB,EAA+B;AAAA;;AAC7B,UAAMC,OAAO,IAAb;AACA,WAAKD,OAAL,GAAeL,EAAEO,MAAF,CAAS,EAAT,EAAa,KAAKC,WAAL,CAAiBC,cAA9B,EAA8CJ,OAA9C,CAAf;AACA,WAAKK,IAAL,GAAYN,QAAZ;AACA,WAAKO,KAAL,GAAaP,SAASQ,IAAT,CAAc,KAAKP,OAAL,CAAaF,aAA3B,CAAb;AACA,WAAKU,IAAL,GAAY,KAAZ;;AAEA,WAAKF,KAAL,CAAWG,MAAX,GAAoBC,GAApB,CAAwB,aAAxB,EAAuC,MAAvC;;AAEA,WAAKJ,KAAL,CAAWK,EAAX,CAAc,OAAd,EAAuB,UAASC,KAAT,EAAgB;AACrCX,aAAKY,MAAL,CAAY,IAAZ,EAAkBD,KAAlB;AACD,OAFD;AAGD;;AAED;;;;;;;;AAhCU;AAAA;AAAA,6BAsCHE,OAtCG,EAsCMF,KAtCN,EAsCa;AACrB,YAAI,CAAC,KAAKJ,IAAV,EAAgB;AACd,eAAKA,IAAL,GAAYM,OAAZ;;AAEA;AACD;;AAED,YAAIF,MAAMG,QAAV,EAAoB;AAClB,cAAMd,OAAO,IAAb;AACA,cAAMe,QAAQ,KAAKV,KAAL,CAAWW,KAAX,CAAiBH,OAAjB,CAAd;AACA,cAAMI,MAAM,KAAKZ,KAAL,CAAWW,KAAX,CAAiB,KAAKT,IAAtB,CAAZ;;AAEA,cAAMW,MAAM,KAAKb,KAAL,CAAWc,KAAX,CAAiBC,KAAKC,GAAL,CAASN,KAAT,EAAgBE,GAAhB,CAAjB,EAAuCG,KAAKE,GAAL,CAASP,KAAT,EAAgBE,GAAhB,IAAuB,CAA9D,CAAZ;;AAEAvB,YAAE6B,IAAF,CAAOL,GAAP,EAAY,UAASM,CAAT,EAAYC,CAAZ,EAAe;AACzB,gBAAIzB,KAAKD,OAAL,CAAaH,QAAjB,EAA2B;AACzB8B,yBAAW,YAAW;AACpBD,kBAAEE,OAAF,GAAY3B,KAAKO,IAAL,CAAUoB,OAAtB;AACD,eAFD,EAEI3B,KAAKD,OAAL,CAAaH,QAAb,GAAwBsB,IAAIU,MAA7B,GAAuCJ,CAF1C;AAGD,aAJD,MAKK;AACHC,gBAAEE,OAAF,GAAY3B,KAAKO,IAAL,CAAUoB,OAAtB;AACD;AACF,WATD;AAUD;;AAED,aAAKpB,IAAL,GAAYM,OAAZ;AACD;AAjES;;AAAA;AAAA;;AAoEZnB,IAAEmC,EAAF,CAAKlC,mBAAmBmC,UAAxB,IAAsC,UAAS/B,OAAT,EAAkB;AACtD,QAAI,CAAC,KAAKgC,IAAL,CAAU,aAAapC,mBAAmBmC,UAA1C,CAAL,EAA4D;AAC1D,WAAKC,IAAL,CAAU,aAAapC,mBAAmBmC,UAA1C,EAAsD,IAAInC,kBAAJ,CAAuB,IAAvB,EAA6BI,OAA7B,CAAtD;AACD;;AAED,WAAO,KAAKgC,IAAL,CAAU,aAAapC,mBAAmBmC,UAA1C,CAAP;AACD,GAND;AAQD,CA5EA,EA4EEE,MA5EF","file":"multiselect.js","sourcesContent":["/**\r\n * Part of Phoenix project.\r\n *\r\n * @copyright  Copyright (C) 2016 LYRASOFT. All rights reserved.\r\n * @license    GNU General Public License version 2 or later.\r\n */\r\n\r\n/**\r\n * PhoenixMultiSelect\r\n */\r\n;(function($) {\r\n  /**\r\n   * Multi Select.\r\n   *\r\n   * @param {jQuery} $element\r\n   * @param {Object} options\r\n   *\r\n   * @constructor\r\n   */\r\n  class PhoenixMultiSelect {\r\n    static get pluginName() { return 'multiselect' }\r\n    static get defaultOptions() {\r\n      return {\r\n        duration: 100,\r\n        inputSelector: 'input.grid-checkbox[type=checkbox]'\r\n      }\r\n    }\r\n\r\n    constructor($element, options) {\r\n      const self = this;\r\n      this.options = $.extend({}, this.constructor.defaultOptions, options);\r\n      this.form = $element;\r\n      this.boxes = $element.find(this.options.inputSelector);\r\n      this.last = false;\r\n\r\n      this.boxes.parent().css('user-select', 'none');\r\n\r\n      this.boxes.on('click', function(event) {\r\n        self.select(this, event);\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Do select.\r\n     *\r\n     * @param {Element} element\r\n     * @param {Event}   event\r\n     */\r\n    select(element, event) {\r\n      if (!this.last) {\r\n        this.last = element;\r\n\r\n        return;\r\n      }\r\n\r\n      if (event.shiftKey) {\r\n        const self = this;\r\n        const start = this.boxes.index(element);\r\n        const end = this.boxes.index(this.last);\r\n\r\n        const chs = this.boxes.slice(Math.min(start, end), Math.max(start, end) + 1);\r\n\r\n        $.each(chs, function(i, e) {\r\n          if (self.options.duration) {\r\n            setTimeout(function() {\r\n              e.checked = self.last.checked;\r\n            }, (self.options.duration / chs.length) * i);\r\n          }\r\n          else {\r\n            e.checked = self.last.checked;\r\n          }\r\n        })\r\n      }\r\n\r\n      this.last = element;\r\n    }\r\n  }\r\n\r\n  $.fn[PhoenixMultiSelect.pluginName] = function(options) {\r\n    if (!this.data('phoenix.' + PhoenixMultiSelect.pluginName)) {\r\n      this.data('phoenix.' + PhoenixMultiSelect.pluginName, new PhoenixMultiSelect(this, options));\r\n    }\r\n\r\n    return this.data('phoenix.' + PhoenixMultiSelect.pluginName);\r\n  };\r\n\r\n})(jQuery);\r\n"]}