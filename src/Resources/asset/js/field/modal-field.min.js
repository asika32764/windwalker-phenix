"use strict";var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}$(function(){window.Phoenix=window.Phoenix||{},window.Phoenix.Field=window.Phoenix.Field||{},window.Phoenix.Field.Modal={elements:{},select:function(e,t,i){var n=$(e);"object"!==(void 0===t?"undefined":_typeof(t))&&(t={value:t,title:i}),n.find(".input-group input").attr("value",t.title).trigger("change").delay(250).effect("highlight"),n.find("input[data-value-store]").attr("value",t.value).trigger("change"),n.find(".modal-field-image-preview").css("background-image","url("+t.image+")"),$("#phoenix-iframe-modal").modal("hide")},selectAsTag:function(e,t,i){var n=$(e).find("[data-value-store]");"object"!==(void 0===t?"undefined":_typeof(t))&&(t={value:t,title:i});var a=n.find("option[value='"+t.value+"']");if(a.length)a.is(":checked")?alert(Phoenix.__("phoenix.form.field.modal.already.selected")):(a.prop("selected",!0).trigger("change"),$("#phoenix-iframe-modal").modal("hide"));else{var o=new Option(t.title,t.value,!0,!0);n.append(o).trigger("change"),$("#phoenix-iframe-modal").modal("hide")}},selectAsList:function(e,t,i){var n=$(e),a=n.data("modal-list");"object"!==(void 0===t?"undefined":_typeof(t))&&(t={value:t,title:i}),0===n.find("[data-value='"+t.value+"']").length?(a.append(t,!0),$("#phoenix-iframe-modal").modal("hide")):alert(Phoenix.__("phoenix.form.field.modal.already.selected"))}},window.Phoenix.Field.ModalList=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.$ele=$(t),this.options=n,this.items=i,this.template=underscore.template($(this.options.itemTemplate).html()),this.render(),this.$ele.data("modal-list",this)}return _createClass(e,[{key:"render",value:function(){var e=this;this.items.forEach(function(t){e.append(t)})}},{key:"append",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.$ele.find(".modal-list-container"),a=$(this.template(e));a.attr("data-value",e.value),a.find(".modal-list-item-delete button").on("click",function(e){var i=$(e.currentTarget).parents(".list-group-item");i.slideUp(400,function(){i.remove(),t.toggleRequired()})}),n.append(a),this.toggleRequired(),i&&a.effect("highlight")}},{key:"toggleRequired",value:function(){var e=this.$ele.find("[data-value-store]");this.$ele.find("[data-validation-placeholder]").attr("disabled",0!==e.length)}}]),e}()});