"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var a=0;a<n.length;a++){var r=n[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,a){return n&&_defineProperties(e.prototype,n),a&&_defineProperties(e,a),e}$(function(){var e=window.swal||function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;alert(e+" / "+n)};Phoenix.plugin("dragFile",function(){function n(a,r){var t=this;_classCallCheck(this,n),a.on("change",function(n){var a,r=$(n.currentTarget),i=r[0].files,l=r.attr("data-max-files"),o=r.attr("data-max-size"),f=r.attr("placeholder"),c=(r.attr("accept")||r.attr("data-accepted")||"").split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0}).map(function(e){return-1===e.indexOf("/")&&"."===e[0]?e.substr(1):e});if(f||(f=r.attr("multiple")?Phoenix.__("phoenix.form.field.drag.file.placeholder.multiple"):Phoenix.__("phoenix.form.field.drag.file.placeholder.single")),l&&i.length>l)return e(Phoenix.__("phoenix.form.field.drag.file.message.max.files",l),"","warning"),void n.preventDefault();var s=0;if(Array.prototype.forEach.call(i,function(e){t.checkFileType(c,e),s+=e.size}),o&&s/1024/1024>o)return e(Phoenix.__("phoenix.form.field.drag.file.message.max.size",o<1?1024*o+"KB":o+"MB"),"","warning"),void n.preventDefault();a=i.length>1?'<span class="fa fa-files fa-copy"></span> \n                    '.concat(Phoenix.__("phoenix.form.field.drag.file.selected",i.length)):1===i.length?'<span class="fa fa-file"></span> '.concat(i[0].name):'<span class="fa fa-upload"></span> '.concat(f),r.next(".custom-file-label").find("span").html(a)}).on("dragover",function(e){$(e.currentTarget).addClass("hover")}).on("dragleave",function(e){$(e.currentTarget).removeClass("hover")}).on("drop",function(e){$(e.currentTarget).removeClass("hover")}).trigger("change")}return _createClass(n,[{key:"checkFileType",value:function(n,a){var r=this,t=a.name.split(".").pop();if(n.length){var i=!1;if(n.forEach(function(e){i||(-1!==e.indexOf("/")?r.compareMimeType(e,a.type)&&(i=!0):e===t&&(i=!0))}),!i)throw e(Phoenix.__("phoenix.form.field.drag.file.message.unaccepted.files"),Phoenix.__("phoenix.form.field.drag.file.message.unaccepted.files.desc",n.join(", ")),"warning"),new Error("Not accepted file ext")}}},{key:"compareMimeType",value:function(e,n){var a=e.split("/"),r=n.split("/");return"*"===a[1]?a[0]===r[0]:e===n}}]),n}())});