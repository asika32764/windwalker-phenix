{"version":3,"sources":["phoenix.js"],"names":["PhoenixCore","options","$","extend","constructor","defaultOptions","_listeners","plugin","Array","isArray","forEach","use","p","is","undefined","Error","name","PhoenixPlugin","instance","install","boot","trigger","uninstall","event","handler","push","args","r","listeners","listener","message","callback","confirmed","confirm","msg","type","messageContainer","selector","Phoenix","Theme","renderMessage","removeMessages","url","time","window","setInterval","XMLHttpRequest","e","open","send","self","fn","data","ele","phoenix","toLowerCase","createProxies","resetProxies","created","ready","proxies","hasOwnProperty","origin","Object","defineProperties","get","set","value","PhoenixJQueryPlugin","mainSelector","pluginName","pluginClass","jQuery","PhoenixLegacy","UI","formInited","gridInited","on","method","Grid"],"mappings":"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","file":"phoenix.js","sourcesContent":["/**\r\n * Part of phoenix project.\r\n *\r\n * @copyright  Copyright (C) 2018 ${ORGANIZATION}.\r\n * @license    __LICENSE__\r\n */\r\n\r\n($ => {\r\n  class PhoenixCore {\r\n    /**\r\n     * Default options.\r\n     * @returns {Object}\r\n     */\r\n    static get defaultOptions() {\r\n      return {}\r\n    }\r\n\r\n    constructor(options = {}) {\r\n      this.options = $.extend(true, {}, this.constructor.defaultOptions, options);\r\n      this._listeners = {};\r\n    }\r\n\r\n    use(plugin) {\r\n      if (Array.isArray(plugin)) {\r\n        plugin.forEach(p => this.use(p));\r\n        return this;\r\n      }\r\n\r\n      if (plugin.is === undefined) {\r\n        throw new Error(`Plugin: ${plugin.name} must instance of : ${PhoenixPlugin.name}`);\r\n      }\r\n\r\n      const instance = plugin.install(this);\r\n      instance.boot(this);\r\n\r\n      this.trigger('plugin.installed', instance);\r\n\r\n      return this;\r\n    }\r\n\r\n    detach(plugin) {\r\n      if (!plugin instanceof PhoenixPlugin) {\r\n        throw new Error('Plugin must instance of : ' + PhoenixPlugin.name);\r\n      }\r\n\r\n      plugin.uninstall(this);\r\n\r\n      this.trigger('plugin.uninstalled', plugin);\r\n\r\n      return this;\r\n    }\r\n\r\n    on(event, handler) {\r\n      if (this._listeners[event] === undefined) {\r\n        this._listeners[event] = [];\r\n      }\r\n\r\n      this._listeners[event].push(handler);\r\n\r\n      return this;\r\n    }\r\n\r\n    off(event) {\r\n      delete this._listeners[event];\r\n\r\n      return this;\r\n    }\r\n\r\n    trigger(event, args) {\r\n      const r = [];\r\n      this.listeners(event).forEach(listener => {\r\n        r.push(listener(args));\r\n      });\r\n\r\n      return r;\r\n    }\r\n\r\n    listeners(event) {\r\n      return this._listeners[event] === undefined ? [] : this._listeners[event];\r\n    }\r\n\r\n    /**\r\n     * Confirm popup.\r\n     *\r\n     * TODO: Move to core.\r\n     *\r\n     * @param {string}   message\r\n     * @param {Function} callback\r\n     */\r\n    confirm(message, callback) {\r\n      message = message || 'Are you sure?';\r\n\r\n      const confirmed = confirm(message);\r\n\r\n      callback(confirmed);\r\n\r\n      return confirmed;\r\n    }\r\n\r\n    /**\r\n     * Add message.\r\n     *\r\n     * TODO: Move to core.\r\n     *\r\n     * @param {string} msg\r\n     * @param {string} type\r\n     *\r\n     * @returns {PhoenixForm}\r\n     */\r\n    addMessage(msg, type) {\r\n      const messageContainer = $(this.options.selector.message);\r\n\r\n      Phoenix.Theme.renderMessage(messageContainer, msg, type);\r\n\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Remove all messages.\r\n     *\r\n     * TODO: Move to core.\r\n     *\r\n     * @returns {PhoenixForm}\r\n     */\r\n    removeMessages() {\r\n      const messageContainer = $(this.options.selector.message);\r\n\r\n      Phoenix.Theme.removeMessages(messageContainer);\r\n\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Keep alive.\r\n     *\r\n     * TODO: Move to core.\r\n     *\r\n     * @param {string} url\r\n     * @param {Number} time\r\n     *\r\n     * @return {number}\r\n     */\r\n    keepAlive(url, time) {\r\n      return window.setInterval(function () {\r\n        let r;\r\n\r\n        try {\r\n          r = new XMLHttpRequest;\r\n        }\r\n        catch (e) {\r\n          // Nothing\r\n        }\r\n\r\n        if (r) {\r\n          r.open('GET', url, true);\r\n          r.send(null);\r\n        }\r\n      }, time);\r\n    }\r\n\r\n    plugin(name, plugin) {\r\n      const self = this;\r\n      $.fn[name] = function (...args) {\r\n        if (!this.data('phoenix.' + name)) {\r\n          const instance = new plugin(this, ...args);\r\n          this.data('phoenix.' + name, instance);\r\n          self.trigger('jquery.plugin.created', {name: name, ele: this, instance: instance});\r\n        }\r\n\r\n        const instance = this.data('phoenix.' + name);\r\n\r\n        self.trigger('jquery.plugin.get', {name: name, ele: this, instance: instance});\r\n\r\n        return instance;\r\n      };\r\n\r\n      return this;\r\n    }\r\n  }\r\n\r\n  class PhoenixPlugin {\r\n    static get is() {\r\n      throw new Error('Please add \"is\" property to Phoenix Plugin: ' + this.name);\r\n    }\r\n\r\n    static get proxies() {\r\n      return {};\r\n    }\r\n\r\n    static get defaultOptions() {\r\n      return {}\r\n    }\r\n\r\n    get options() {\r\n      return this.phoenix.options[this.constructor.is.toLowerCase()];\r\n    }\r\n\r\n    static install(phoenix) {\r\n      const self = new this;\r\n\r\n      this.createProxies(phoenix, self);\r\n      return self;\r\n    }\r\n\r\n    static uninstall(phoenix) {\r\n      const self = new this(phoenix);\r\n\r\n      this.resetProxies(phoenix, self);\r\n    }\r\n\r\n    constructor() {\r\n      //\r\n    }\r\n\r\n    boot(phoenix) {\r\n      this.phoenix = phoenix;\r\n\r\n      const name = this.constructor.is.toLowerCase();\r\n\r\n      // Merge to global options\r\n      this.phoenix.options[name] = $.extend(\r\n        true,\r\n        this.phoenix.options[name],\r\n        this.constructor.defaultOptions,\r\n        this.phoenix.options[name]\r\n      );\r\n\r\n      // Created hook\r\n      this.created();\r\n\r\n      // DOM Ready hook\r\n      $(() => this.ready());\r\n\r\n      // Phoenix onload hook\r\n      // todo: add loaded\r\n    }\r\n\r\n    created() {\r\n      //\r\n    }\r\n\r\n    ready() {\r\n      //\r\n    }\r\n\r\n    loaded() {\r\n      //\r\n    }\r\n\r\n    static createProxies(phoenix, plugin) {\r\n      if (plugin.constructor.proxies === undefined) {\r\n        return this;\r\n      }\r\n\r\n      this.resetProxies(phoenix, plugin);\r\n\r\n      phoenix[plugin.constructor.is] = plugin;\r\n\r\n      const proxies = plugin.constructor.proxies;\r\n\r\n      for (let name in proxies) {\r\n        if (!proxies.hasOwnProperty(name)) {\r\n          continue;\r\n        }\r\n\r\n        const origin = proxies[name];\r\n\r\n        if (phoenix[name] !== undefined) {\r\n          throw new Error(`Property: ${name} has exists in Phoenix instance.`);\r\n        }\r\n\r\n        if (typeof origin === 'function') {\r\n          phoenix[name] = origin;\r\n        } else if (plugin[origin] !== undefined) {\r\n          if (typeof plugin[origin] === 'function') {\r\n            phoenix[name] = function (...args) {\r\n              return plugin[origin](...args);\r\n            };\r\n          } else {\r\n            Object.defineProperties(phoenix, name, {\r\n              get: () => plugin[origin],\r\n              set: value => {\r\n                plugin[origin] = value;\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          throw new Error(`Proxy property: \"${origin}\" not found in Plugin: ${plugin.constructor.name}`);\r\n        }\r\n      }\r\n    }\r\n\r\n    static resetProxies(phoenix, plugin) {\r\n      const name = typeof plugin === 'string' ? plugin : plugin.constructor.is;\r\n\r\n      if (phoenix[name]) {\r\n        plugin = phoenix[name];\r\n      }\r\n\r\n      if (plugin.constructor.proxies === undefined) {\r\n        return;\r\n      }\r\n\r\n      for (let name in plugin.constructor.proxies) {\r\n        delete phoenix[name];\r\n      }\r\n\r\n      delete phoenix[plugin.constructor.is];\r\n    }\r\n  }\r\n\r\n  class PhoenixJQueryPlugin extends PhoenixPlugin {\r\n    /**\r\n     * Plugin name.\r\n     * @returns {string|null}\r\n     */\r\n    static get pluginName() {\r\n      throw new Error('Please provide a plugin name.');\r\n    }\r\n\r\n    static get pluginClass() {\r\n      throw new Error('Please provide a class as plugin instance.');\r\n    }\r\n\r\n    static install(phoenix) {\r\n      const instance = super.install(phoenix);\r\n\r\n      phoenix.plugin(this.pluginName, this.pluginClass);\r\n\r\n      return instance;\r\n    }\r\n\r\n    createPlugin(selector, options = {}, ...args) {\r\n      options.mainSelector = selector;\r\n\r\n      return $(selector)[this.constructor.pluginName](options, this.phoenix, ...args);\r\n    }\r\n  }\r\n\r\n  window.Phoenix = new PhoenixCore();\r\n  window.PhoenixPlugin = PhoenixPlugin;\r\n  window.PhoenixJQueryPlugin = PhoenixJQueryPlugin;\r\n})(jQuery);\r\n\r\n(($) => {\r\n  class PhoenixLegacy extends PhoenixPlugin {\r\n    static get is() {\r\n      return 'Legacy';\r\n    }\r\n\r\n    created() {\r\n      const phoenix = this.phoenix;\r\n\r\n      phoenix.Theme = phoenix.UI;\r\n\r\n      let formInited = false;\r\n      let gridInited = false;\r\n\r\n      phoenix.on('jquery.plugin.created', event => {\r\n        // Legacy Form polyfill\r\n        if (!formInited && event.name === 'form') {\r\n          ['delete', 'get', 'patch', 'post', 'put', 'sendDelete', 'submit'].forEach((method) => {\r\n            phoenix[method] = (...args) => event.instance[method](...args);\r\n          });\r\n\r\n          formInited = true;\r\n        }\r\n\r\n        // Legacy Grid polyfill\r\n        if (!gridInited && event.name === 'grid') {\r\n          ['toggleFilter', 'sort', 'checkRow', 'updateRow', 'doTask', 'batch', 'copyRow', 'deleteList', 'deleteRow',\r\n            'toggleAll', 'countChecked', 'getChecked', 'hasChecked', 'reorderAll', 'reorder']\r\n            .forEach((method) => {\r\n              phoenix.Grid[method] = (...args) => event.instance[method](...args);\r\n            });\r\n\r\n          gridInited = true;\r\n        }\r\n      });\r\n    }\r\n\r\n    ready() {\r\n      super.ready();\r\n    }\r\n  }\r\n\r\n  window.PhoenixLegacy = PhoenixLegacy;\r\n})(jQuery);\r\n"]}