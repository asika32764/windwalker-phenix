{"version":3,"sources":["multiselect.js"],"names":["$","PhoenixMultiSelect","$element","options","self","extend","constructor","defaultOptions","form","boxes","find","inputSelector","last","parent","css","on","event","select","element","shiftKey","start","index","end","chs","slice","Math","min","max","each","i","e","duration","setTimeout","checked","length","fn","pluginName","data","jQuery"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAAC,CAAC,UAASA,CAAT,EAAY;AACZ;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AARc,MASNC,kBATM;AAkBV,gCAAYC,QAAZ,EAAsBC,OAAtB,EAA+B;AAAA;;AAC7B,UAAMC,IAAI,GAAG,IAAb;AACA,WAAKD,OAAL,GAAeH,CAAC,CAACK,MAAF,CAAS,EAAT,EAAa,KAAKC,WAAL,CAAiBC,cAA9B,EAA8CJ,OAA9C,CAAf;AACA,WAAKK,IAAL,GAAYN,QAAZ;AACA,WAAKO,KAAL,GAAaP,QAAQ,CAACQ,IAAT,CAAc,KAAKP,OAAL,CAAaQ,aAA3B,CAAb;AACA,WAAKC,IAAL,GAAY,KAAZ;AAEA,WAAKH,KAAL,CAAWI,MAAX,GAAoBC,GAApB,CAAwB,aAAxB,EAAuC,MAAvC;AAEA,WAAKL,KAAL,CAAWM,EAAX,CAAc,OAAd,EAAuB,UAASC,KAAT,EAAgB;AACrCZ,QAAAA,IAAI,CAACa,MAAL,CAAY,IAAZ,EAAkBD,KAAlB;AACD,OAFD;AAGD;AAED;AACJ;AACA;AACA;AACA;AACA;;;AArCc;AAAA;AAAA,aAsCV,gBAAOE,OAAP,EAAgBF,KAAhB,EAAuB;AACrB,YAAI,CAAC,KAAKJ,IAAV,EAAgB;AACd,eAAKA,IAAL,GAAYM,OAAZ;AAEA;AACD;;AAED,YAAIF,KAAK,CAACG,QAAV,EAAoB;AAClB,cAAMf,IAAI,GAAG,IAAb;AACA,cAAMgB,KAAK,GAAG,KAAKX,KAAL,CAAWY,KAAX,CAAiBH,OAAjB,CAAd;AACA,cAAMI,GAAG,GAAG,KAAKb,KAAL,CAAWY,KAAX,CAAiB,KAAKT,IAAtB,CAAZ;AAEA,cAAMW,GAAG,GAAG,KAAKd,KAAL,CAAWe,KAAX,CAAiBC,IAAI,CAACC,GAAL,CAASN,KAAT,EAAgBE,GAAhB,CAAjB,EAAuCG,IAAI,CAACE,GAAL,CAASP,KAAT,EAAgBE,GAAhB,IAAuB,CAA9D,CAAZ;AAEAtB,UAAAA,CAAC,CAAC4B,IAAF,CAAOL,GAAP,EAAY,UAASM,CAAT,EAAYC,CAAZ,EAAe;AACzB,gBAAI1B,IAAI,CAACD,OAAL,CAAa4B,QAAjB,EAA2B;AACzBC,cAAAA,UAAU,CAAC,YAAW;AACpBF,gBAAAA,CAAC,CAACG,OAAF,GAAY7B,IAAI,CAACQ,IAAL,CAAUqB,OAAtB;AACD,eAFS,EAEN7B,IAAI,CAACD,OAAL,CAAa4B,QAAb,GAAwBR,GAAG,CAACW,MAA7B,GAAuCL,CAFhC,CAAV;AAGD,aAJD,MAKK;AACHC,cAAAA,CAAC,CAACG,OAAF,GAAY7B,IAAI,CAACQ,IAAL,CAAUqB,OAAtB;AACD;AACF,WATD;AAUD;;AAED,aAAKrB,IAAL,GAAYM,OAAZ;AACD;AAjES;AAAA;AAAA,WAUV,eAAwB;AAAE,eAAO,aAAP;AAAsB;AAVtC;AAAA;AAAA,WAWV,eAA4B;AAC1B,eAAO;AACLa,UAAAA,QAAQ,EAAE,GADL;AAELpB,UAAAA,aAAa,EAAE;AAFV,SAAP;AAID;AAhBS;;AAAA;AAAA;;AAoEZX,EAAAA,CAAC,CAACmC,EAAF,CAAKlC,kBAAkB,CAACmC,UAAxB,IAAsC,UAASjC,OAAT,EAAkB;AACtD,QAAI,CAAC,KAAKkC,IAAL,CAAU,aAAapC,kBAAkB,CAACmC,UAA1C,CAAL,EAA4D;AAC1D,WAAKC,IAAL,CAAU,aAAapC,kBAAkB,CAACmC,UAA1C,EAAsD,IAAInC,kBAAJ,CAAuB,IAAvB,EAA6BE,OAA7B,CAAtD;AACD;;AAED,WAAO,KAAKkC,IAAL,CAAU,aAAapC,kBAAkB,CAACmC,UAA1C,CAAP;AACD,GAND;AAQD,CA5EA,EA4EEE,MA5EF","sourcesContent":["/**\n * Part of Phoenix project.\n *\n * @copyright  Copyright (C) 2016 LYRASOFT. All rights reserved.\n * @license    GNU General Public License version 2 or later.\n */\n\n/**\n * PhoenixMultiSelect\n */\n;(function($) {\n  /**\n   * Multi Select.\n   *\n   * @param {jQuery} $element\n   * @param {Object} options\n   *\n   * @constructor\n   */\n  class PhoenixMultiSelect {\n    static get pluginName() { return 'multiselect' }\n    static get defaultOptions() {\n      return {\n        duration: 100,\n        inputSelector: 'input.grid-checkbox[type=checkbox]'\n      }\n    }\n\n    constructor($element, options) {\n      const self = this;\n      this.options = $.extend({}, this.constructor.defaultOptions, options);\n      this.form = $element;\n      this.boxes = $element.find(this.options.inputSelector);\n      this.last = false;\n\n      this.boxes.parent().css('user-select', 'none');\n\n      this.boxes.on('click', function(event) {\n        self.select(this, event);\n      });\n    }\n\n    /**\n     * Do select.\n     *\n     * @param {Element} element\n     * @param {Event}   event\n     */\n    select(element, event) {\n      if (!this.last) {\n        this.last = element;\n\n        return;\n      }\n\n      if (event.shiftKey) {\n        const self = this;\n        const start = this.boxes.index(element);\n        const end = this.boxes.index(this.last);\n\n        const chs = this.boxes.slice(Math.min(start, end), Math.max(start, end) + 1);\n\n        $.each(chs, function(i, e) {\n          if (self.options.duration) {\n            setTimeout(function() {\n              e.checked = self.last.checked;\n            }, (self.options.duration / chs.length) * i);\n          }\n          else {\n            e.checked = self.last.checked;\n          }\n        })\n      }\n\n      this.last = element;\n    }\n  }\n\n  $.fn[PhoenixMultiSelect.pluginName] = function(options) {\n    if (!this.data('phoenix.' + PhoenixMultiSelect.pluginName)) {\n      this.data('phoenix.' + PhoenixMultiSelect.pluginName, new PhoenixMultiSelect(this, options));\n    }\n\n    return this.data('phoenix.' + PhoenixMultiSelect.pluginName);\n  };\n\n})(jQuery);\n"],"file":"multiselect.js"}